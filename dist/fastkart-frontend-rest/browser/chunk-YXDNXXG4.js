import{Ab as _,Eb as E,Fa as $,Lb as B,ba as p,ic as V,jc as C,kc as H,mc as N,nc as D,oc as T,p as F,pc as W,r as u,s as S,u as m}from"./chunk-3ZISJ7VE.js";import{Bc as w,Rc as R,Y as l,a as f,b as h,ca as n,fa as s,m as a}from"./chunk-37HN4E3D.js";var ct=(()=>{class i{constructor(t,e,o){this.store=t,this.router=e,this.authService=o}canActivate(t,e){return this.authService.redirectUrl=e.url,this.store.selectSnapshot(o=>o.auth&&o.auth.access_token)?(this.store.dispatch(new _).subscribe({complete:()=>!0}),!0):this.router.createUrlTree(["/auth/login"])}canActivateChild(t,e){return this.store.selectSnapshot(o=>o.auth&&o.auth.access_token)?((this.router.url.startsWith("/account")||this.router.url=="/checkout"||this.router.url=="/compare")&&this.router.navigate(["/"]),!1):!0}static{this.\u0275fac=function(e){return new(e||i)(s(F),s(R),s(E))}}static{this.\u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var z=(()=>{class i{static{this.type="[Store] Get"}constructor(t){this.payload=t}}return i})(),J=(()=>{class i{static{this.type="[Store] Get By Slug"}constructor(t){this.slug=t}}return i})();var K=(()=>{class i{constructor(t){this.http=t,this.skeletonLoader=!1}getStores(t){return this.http.get(`${p.URL}/store`,{params:t})}getStoreBySlug(t){return this.http.get(`${p.URL}/store/slug/${t}`)}static{this.\u0275fac=function(e){return new(e||i)(s(w))}}static{this.\u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var g=class q{constructor(r,t){this.storeService=r,this.router=t}static store(r){return r.store}static selectedStore(r){return r.selectedStore}getStores(r,t){return this.storeService.skeletonLoader=!0,this.storeService.getStores(t.payload).pipe(l({next:e=>{r.patchState({store:{data:e.data,total:e?.total?e?.total:e.data?.length}})},complete:()=>{this.storeService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}getStoreBySlug(r,{slug:t}){return this.storeService.getStoreBySlug(t).pipe(l({next:e=>{let o=r.getState();r.patchState(h(f({},o),{selectedStore:e}))},error:e=>{throw this.router.navigate(["/404"]),new Error(e?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||q)(s(K),s(R))}}static{this.\u0275prov=n({token:q,factory:q.\u0275fac})}};a([u(z)],g.prototype,"getStores",null);a([u(J)],g.prototype,"getStoreBySlug",null);a([m()],g,"store",null);a([m()],g,"selectedStore",null);g=a([S({name:"store",defaults:{store:{data:[],total:0},selectedStore:null}})],g);var O=(()=>{class i{static{this.type="[Attribute] Get"}constructor(t){this.payload=t}}return i})(),P=(()=>{class i{static{this.type="[Attribute] Value Get"}constructor(t){this.payload=t}}return i})();var A=class x{constructor(r){this.attributeService=r}static attribute(r){return r.attribute}static attribute_value(r){return t=>t?r?.attribute_values.filter(e=>+e.attribute_id===t)?.map(e=>({label:e?.value,value:e?.id})):[]}getAttributes(r,t){return this.attributeService.skeletonLoader=!0,this.attributeService.getAttributes(t.payload).pipe(l({next:e=>{r.patchState({attribute:{data:e.data,total:e?.total?e?.total:e.data.length}})},complete:()=>{this.attributeService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}getAttributeValues(r,t){return this.attributeService.getAttributeValues(t.payload).pipe(l({next:e=>{let o=r.getState();r.patchState(h(f({},o),{attribute_values:e.data}))},error:e=>{throw new Error(e?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||x)(s(B))}}static{this.\u0275prov=n({token:x,factory:x.\u0275fac})}};a([u(O)],A.prototype,"getAttributes",null);a([u(P)],A.prototype,"getAttributeValues",null);a([m()],A,"attribute",null);a([m()],A,"attribute_value",null);A=a([S({name:"attribute",defaults:{attribute:{data:[],total:0},attribute_values:[]}})],A);var X=(()=>{class i{constructor(t){this.http=t,this.skeletonLoader=!1}getQuestionAnswers(t){return this.http.get(`${p.URL}/question-and-answer`,{params:t})}sendQuestion(t){return this.http.post(`${p.URL}/question-and-answer`,t)}updateQuestionAnswers(t,e){return this.http.put(`${p.URL}/question-and-answer/${t}`,e)}feedback(t){return this.http.post(`${p.URL}/question-and-answer/feedback`,t)}static{this.\u0275fac=function(e){return new(e||i)(s(w))}}static{this.\u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var b=class I{constructor(r){this.questionsAnswersService=r}static questionsAnswers(r){return r.question}getQuestionAnswers(r,t){return this.questionsAnswersService.skeletonLoader=!0,this.questionsAnswersService.getQuestionAnswers(t.slug).pipe(l({next:e=>{r.patchState({question:{data:e.data,total:e?.total?e?.total:e.data?.length}})},complete:()=>{this.questionsAnswersService.skeletonLoader=!1},error:e=>{throw new Error(e?.error?.message)}}))}sendQuestion(r,t){return this.questionsAnswersService.sendQuestion(t.payload).pipe(l({next:e=>{let o=r.getState();r.patchState(h(f({},o),{question:{data:[...o.question.data,e],total:o?.question.total+1}}))},error:e=>{throw new Error(e?.error?.message)}}))}update(r,{payload:t,id:e}){return this.questionsAnswersService.updateQuestionAnswers(e,t).pipe(l({next:o=>{if(typeof o=="object"){let c=r.getState(),d=[...c.question.data],y=d.findIndex(Q=>Q.id===e);d[y]=o,r.patchState(h(f({},c),{question:{data:d,total:c.question.total}}))}},error:o=>{throw new Error(o?.error?.message)}}))}Feedback(r,t){let e=r.getState(),o=[...e.question.data],c=o.findIndex(d=>Number(d.id)===Number(t.payload.question_and_answer_id));if(t.type==="liked"||t.type==="disliked"){let d=o[c].reaction,y=t.payload.reaction;d===y?(t.type==="liked"?o[c].total_likes-=1:o[c].total_dislikes-=1,o[c].reaction=null,t.payload.reaction=null):(d==="liked"?o[c].total_likes-=1:d==="disliked"&&(o[c].total_dislikes-=1),t.type==="liked"?o[c].total_likes+=1:o[c].total_dislikes+=1,o[c].reaction=y,t.payload.reaction=y)}return r.patchState(h(f({},e),{question:{data:o,total:e.question.total}})),this.questionsAnswersService.feedback(t.payload)}static{this.\u0275fac=function(t){return new(t||I)(s(X))}}static{this.\u0275prov=n({token:I,factory:I.\u0275fac})}};a([u(N)],b.prototype,"getQuestionAnswers",null);a([u(D)],b.prototype,"sendQuestion",null);a([u(T)],b.prototype,"update",null);a([u(W)],b.prototype,"Feedback",null);a([m()],b,"questionsAnswers",null);b=a([S({name:"question",defaults:{question:{data:[],total:0}}})],b);var Y=(()=>{class i{constructor(t){this.http=t}getReview(t){return this.http.get(`${p.URL}/front/review`,{params:t})}sendReview(t){return this.http.post(`${p.URL}/review`,t)}updateReview(t,e){return this.http.put(`${p.URL}/review/${t}`,e)}static{this.\u0275fac=function(e){return new(e||i)(s(w))}}static{this.\u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var k=class G{constructor(r,t){this.notificationService=r,this.reviewsService=t}static review(r){return r.review}getReview(r,t){return this.reviewsService.getReview(t.payload).pipe(l({next:e=>{r.patchState({review:{data:e.data,total:e?.total?e?.total:e.data?.length}})},error:e=>{throw new Error(e?.error?.message)}}))}sendReview(r,t){return this.reviewsService.sendReview(t.payload).pipe(l({next:e=>{let o=r.getState();r.patchState(h(f({},o),{review:{data:[...o.review.data,e],total:o?.review.total+1}}))},complete:()=>{this.notificationService.showSuccess("Review Send Successfully.")},error:e=>{throw new Error(e?.error?.message)}}))}update(r,{payload:t,id:e}){return this.reviewsService.updateReview(e,t).pipe(l({next:o=>{if(typeof o=="object"){let c=r.getState(),d=[...c.review.data],y=d.findIndex(Q=>Q.id===e);d[y]=o,r.patchState(h(f({},c),{review:{data:d,total:c.review.total}}))}},complete:()=>{this.notificationService.showSuccess("Review Updated Successfully.")},error:o=>{throw new Error(o?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||G)(s($),s(Y))}}static{this.\u0275prov=n({token:G,factory:G.\u0275fac})}};a([u(V)],k.prototype,"getReview",null);a([u(C)],k.prototype,"sendReview",null);a([u(H)],k.prototype,"update",null);a([m()],k,"review",null);k=a([S({name:"review",defaults:{review:{data:[],total:0}}})],k);var Z=(()=>{class i{static{this.type="[State] Get"}constructor(t){this.country_id=t}}return i})();var M=(()=>{class i{constructor(t){this.http=t}getStates(){return this.http.get(`${p.URL}/state`)}static{this.\u0275fac=function(e){return new(e||i)(s(w))}}static{this.\u0275prov=n({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var j=class L{constructor(r){this.stateService=r}static state(r){return r.state}static states(r){return t=>t?r.state.data.filter(e=>e.country_id==t).map(e=>({label:e?.name,value:e?.id,country_id:e?.country_id})):r.state.data.map(e=>({label:e?.name,value:e?.id,country_id:e?.country_id}))}getStates(r,t){return r.getState()?.state?.data?.length?!0:this.stateService.getStates().pipe(l({next:o=>{r.patchState({state:{data:o}})},error:o=>{throw new Error(o?.error?.message)}}))}static{this.\u0275fac=function(t){return new(t||L)(s(M))}}static{this.\u0275prov=n({token:L,factory:L.\u0275fac})}};a([u(Z)],j.prototype,"getStates",null);a([m()],j,"state",null);a([m()],j,"states",null);j=a([S({name:"state",defaults:{state:{data:[]}}})],j);export{ct as a,z as b,J as c,K as d,g as e,O as f,A as g,X as h,b as i,k as j,Z as k,j as l};
