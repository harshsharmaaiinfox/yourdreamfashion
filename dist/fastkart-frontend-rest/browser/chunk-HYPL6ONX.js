import{f as G}from"./chunk-3LB6U7I4.js";import{ba as y,da as $,oa as I,pb as M,r as _,s as C,t as p,ta as j,u as f,za as x}from"./chunk-UPORISLH.js";import{B as b,Bc as S,Hc as B,Ic as T,Lc as w,Ra as O,Rc as v,Y as u,a as n,b as h,ca as m,fa as r,m as o}from"./chunk-37HN4E3D.js";var F=(()=>{class s{static{this.type="[Brand] Get"}constructor(e){this.payload=e}}return s})(),D=(()=>{class s{static{this.type="[Brand] Get Brand By Slug"}constructor(e){this.slug=e}}return s})();var P=(()=>{class s{constructor(e){this.http=e}getBrands(e){return this.http.get(`${y.URL}/brand`,{params:e})}getBrandBySlug(e){return this.http.get(`${y.URL}/brand/slug/${e}`)}static{this.\u0275fac=function(i){return new(i||s)(r(S))}}static{this.\u0275prov=m({token:s,factory:s.\u0275fac,providedIn:"root"})}}return s})();var c=class g{constructor(t){this.brandService=t}static brand(t){return t.brand}static selectedBrand(t){return t.selectedBrand}getBrands(t,e){return this.brandService.getBrands(e.payload).pipe(u({next:i=>{t.patchState({brand:{data:i.data,total:i?.total?i?.total:i.data?.length}})},error:i=>{throw new Error(i?.error?.message)}}))}getBrandBySlug(t,e){return this.brandService.getBrandBySlug(e.slug).pipe(u({next:i=>{let l=t.getState();t.patchState(h(n({},l),{selectedBrand:i}))},error:i=>{throw new Error(i?.error?.message)}}))}static{this.\u0275fac=function(e){return new(e||g)(r(P))}}static{this.\u0275prov=m({token:g,factory:g.\u0275fac})}};o([_(F)],c.prototype,"getBrands",null);o([_(D)],c.prototype,"getBrandBySlug",null);o([f()],c,"brand",null);o([f()],c,"selectedBrand",null);c=o([C({name:"brand",defaults:{brand:{data:[],total:0},selectedBrand:null}})],c);var a=class s{constructor(t,e,i,l){this.meta=t,this.router=e,this.titleService=i,this.ngZone=l,this.currentMessageIndex=0,this.delay=1e3,this.isTabInFocus=!0,this.scoContent={},this.router.events.pipe(b(d=>d instanceof w)).subscribe(d=>{this.path=d.url,this.updateSeo(this.path)}),this.fetchData()}fetchData(){this.setting$.subscribe(t=>this.setting=t),this.product$.subscribe(t=>this.product=t),this.blog$.subscribe(t=>this.blog=t),this.page$.subscribe(t=>this.page=t),this.brand$.subscribe(t=>this.brand=t),this.category$.subscribe(t=>this.category=t),this.themeOption$.subscribe(t=>{this.themeOption=t})}updateSeo(t){t.includes("product")?(this.product&&(this.scoContent={url:window.location.href,og_title:this.product.meta_title||this.themeOption?.seo?.meta_title,og_description:this.product.meta_description||this.themeOption?.seo?.meta_description,og_image:this.product.product_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url}),this.customSCO()):t.includes("blog")?this.blog&&(this.scoContent=h(n({},this.scoContent),{url:window.location.href,og_title:this.blog?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.blog?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.blog?.blog_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url}),this.customSCO()):t.includes("page")?(this.page&&(this.scoContent=h(n({},this.scoContent),{url:window.location.href,og_title:this.page?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.page?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.page?.page_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url})),this.customSCO()):t.includes("brand")?(this.brand&&(this.scoContent=h(n({},this.scoContent),{url:window.location.href,og_title:this.brand?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.brand?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.brand?.brand_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url})),this.customSCO()):t.includes("category")?(this.category&&(this.scoContent=h(n({},this.scoContent),{url:window.location.href,og_title:this.category?.meta_title||this.themeOption?.seo?.meta_title,og_description:this.category?.meta_description||this.themeOption?.seo?.meta_description,og_image:this.category?.category_meta_image?.original_url||this.themeOption?.seo?.og_image?.original_url})),this.customSCO()):this.updateDefaultSeo()}updateDefaultSeo(){if(this.meta.updateTag({name:"title",content:this.themeOption?.seo?.meta_title}),this.meta.updateTag({name:"description",content:this.themeOption?.seo?.meta_description}),this.meta.updateTag({property:"og:type",content:"website"}),this.meta.updateTag({property:"og:url",content:this.scoContent.url}),this.meta.updateTag({property:"og:title",content:this.themeOption?.seo?.meta_title}),this.meta.updateTag({property:"og:description",content:this.themeOption?.seo?.meta_description}),this.meta.updateTag({property:"og:image",content:this.scoContent.og_image}),this.meta.updateTag({property:"twitter:card",content:"summary_large_image"}),this.meta.updateTag({property:"twitter:url",content:this.scoContent.url}),this.meta.updateTag({property:"twitter:title",content:this.themeOption?.seo?.meta_title}),this.meta.updateTag({property:"twitter:description",content:this.themeOption?.seo?.meta_description}),this.meta.updateTag({property:"twitter:image",content:this.scoContent.og_image}),this.themeOption?.general&&this.themeOption?.general?.exit_tagline_enable)document.addEventListener("visibilitychange",()=>{this.messages=this.themeOption.general.taglines,this.ngZone.run(()=>{if(this.isTabInFocus=!document.hidden,this.isTabInFocus)return clearTimeout(this.timeoutId),this.titleService.setTitle(this.themeOption?.general?.site_title&&this.themeOption?.general?.site_tagline?`${this.themeOption?.general?.site_title} | ${this.themeOption?.general?.site_tagline}`:"");this.updateMessage()})}),this.scoContent=h(n({},this.scoContent),{url:window.location.href,og_title:this.themeOption?.seo?.meta_title,og_description:this.themeOption?.seo?.meta_description,og_image:this.themeOption?.seo?.og_image?.original_url}),this.customSCO();else return this.titleService.setTitle(this.themeOption?.general?.site_title&&this.themeOption?.general?.site_tagline?`${this.themeOption?.general?.site_title} | ${this.themeOption?.general?.site_tagline}`:"")}customSCO(){let t=this.scoContent.og_title,e=this.scoContent.og_description;this.titleService.setTitle(t),this.meta.updateTag({name:"title",content:t}),this.meta.updateTag({name:"description",content:e}),this.meta.updateTag({property:"og:type",content:"website"}),this.meta.updateTag({property:"og:url",content:this.scoContent.url}),this.meta.updateTag({property:"og:title",content:t}),this.meta.updateTag({property:"og:description",content:e}),this.meta.updateTag({property:"og:image",content:this.scoContent.og_image}),this.meta.updateTag({property:"twitter:card",content:"summary_large_image"}),this.meta.updateTag({property:"twitter:url",content:this.scoContent.url}),this.meta.updateTag({property:"twitter:title",content:t}),this.meta.updateTag({property:"twitter:description",content:e}),this.meta.updateTag({property:"twitter:image",content:this.scoContent.og_image})}updateMessage(){clearTimeout(this.timeoutId),this.currentMessage=this.messages[this.currentMessageIndex],this.titleService.setTitle(this.currentMessage),this.currentMessageIndex=(this.currentMessageIndex+1)%this.messages.length,this.timeoutId=setTimeout(()=>{this.updateMessage()},this.delay)}ngOnDestroy(){clearTimeout(this.timeoutId)}static{this.\u0275fac=function(e){return new(e||s)(r(B),r(v),r(T),r(O))}}static{this.\u0275prov=m({token:s,factory:s.\u0275fac,providedIn:"root"})}};o([p($.themeOptions)],a.prototype,"themeOption$",void 0);o([p(x.setting)],a.prototype,"setting$",void 0);o([p(I.selectedProduct)],a.prototype,"product$",void 0);o([p(j.selectedBlog)],a.prototype,"blog$",void 0);o([p(c.selectedBrand)],a.prototype,"brand$",void 0);o([p(G.selectedPage)],a.prototype,"page$",void 0);o([p(M.selectedCategory)],a.prototype,"category$",void 0);export{F as a,D as b,c,a as d};
